{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Employees</h2>
  <div>
    {% if current_user.role in ['Admin', 'IT', 'Manager'] %}
      <a href="{{ url_for('main.export_employees_csv') }}" class="btn btn-outline-primary me-2">ðŸ“¥ Export CSV</a>
      <a href="{{ url_for('main.export_employees_excel') }}" class="btn btn-outline-success me-2">ðŸ“Š Export Excel</a>
    {% endif %}
    {% if current_user.role in ['Admin', 'IT'] %}
      <a href="{{ url_for('main.employee_new') }}" class="btn btn-primary">Add Employee</a>
    {% endif %}
  </div>
</div>
<table class="table table-sm table-hover">
 <thead class="table-light"><tr><th>ID</th><th>Name</th><th>Department</th><th>Contact</th>{% if current_user.role in ['Admin', 'IT'] %}<th>Actions</th>{% endif %}</tr></thead>
 <tbody>
 {% for e in employees %}<tr><td>{{ e.id }}</td><td>{{ e.name }}</td><td>{{ e.department }}</td><td>{{ e.contact }}</td>
  {% if current_user.role in ['Admin', 'IT'] %}
    <td>
      <a href="{{ url_for('main.employee_edit', emp_id=e.id) }}" class="btn btn-sm btn-primary">Edit</a>
      <form action="{{ url_for('main.employee_delete', emp_id=e.id) }}" method="post" style="display:inline-block" onsubmit="return confirm('Delete employee?');">
        <button type="submit" class="btn btn-sm btn-danger">Delete</button>
      </form>
    </td>
  {% endif %}
 </tr>{% endfor %}
 </tbody>
</table>
{% endblock %}
